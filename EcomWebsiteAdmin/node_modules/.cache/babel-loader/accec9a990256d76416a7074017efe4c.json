{"ast":null,"code":"import { all, takeEvery, put, fork, call } from 'redux-saga/effects';\nimport { AUTH_TOKEN, SIGNIN, SIGNOUT, SIGNUP, SIGNIN_WITH_GOOGLE, SIGNIN_WITH_FACEBOOK } from '../constants/Auth';\nimport { showAuthMessage, authenticated, signOutSuccess, signUpSuccess, signInWithGoogleAuthenticated, signInWithFacebookAuthenticated } from \"../actions/Auth\";\nimport FirebaseService from 'services/FirebaseService';\nexport function* signInWithFBEmail() {\n  yield takeEvery(SIGNIN, function* ({\n    payload\n  }) {\n    const {\n      email,\n      password\n    } = payload;\n    try {\n      const user = yield call(FirebaseService.signInEmailRequest, email, password);\n      if (user.message) {\n        yield put(showAuthMessage(user.message));\n      } else {\n        localStorage.setItem(AUTH_TOKEN, user.user.uid);\n        yield put(authenticated(user.user.uid));\n      }\n    } catch (err) {\n      yield put(showAuthMessage(err));\n    }\n  });\n}\nexport function* signOut() {\n  yield takeEvery(SIGNOUT, function* () {\n    try {\n      const signOutUser = yield call(FirebaseService.signOutRequest);\n      if (signOutUser === undefined) {\n        localStorage.removeItem(AUTH_TOKEN);\n        yield put(signOutSuccess(signOutUser));\n      } else {\n        yield put(showAuthMessage(signOutUser.message));\n      }\n    } catch (err) {\n      yield put(showAuthMessage(err));\n    }\n  });\n}\nexport function* signUpWithFBEmail() {\n  yield takeEvery(SIGNUP, function* ({\n    payload\n  }) {\n    const {\n      email,\n      password\n    } = payload;\n    try {\n      const user = yield call(FirebaseService.signUpEmailRequest, email, password);\n      if (user.message) {\n        yield put(showAuthMessage(user.message));\n      } else {\n        localStorage.setItem(AUTH_TOKEN, user.user.uid);\n        yield put(signUpSuccess(user.user.uid));\n      }\n    } catch (error) {\n      yield put(showAuthMessage(error));\n    }\n  });\n}\nexport function* signInWithFBGoogle() {\n  yield takeEvery(SIGNIN_WITH_GOOGLE, function* () {\n    try {\n      const user = yield call(FirebaseService.signInGoogleRequest);\n      if (user.message) {\n        yield put(showAuthMessage(user.message));\n      } else {\n        localStorage.setItem(AUTH_TOKEN, user.user.uid);\n        yield put(signInWithGoogleAuthenticated(user.user.uid));\n      }\n    } catch (error) {\n      yield put(showAuthMessage(error));\n    }\n  });\n}\nexport function* signInWithFacebook() {\n  yield takeEvery(SIGNIN_WITH_FACEBOOK, function* () {\n    try {\n      const user = yield call(FirebaseService.signInFacebookRequest);\n      if (user.message) {\n        yield put(showAuthMessage(user.message));\n      } else {\n        localStorage.setItem(AUTH_TOKEN, user.user.uid);\n        yield put(signInWithFacebookAuthenticated(user.user.uid));\n      }\n    } catch (error) {\n      yield put(showAuthMessage(error));\n    }\n  });\n}\nexport default function* rootSaga() {\n  yield all([fork(signInWithFBEmail), fork(signOut), fork(signUpWithFBEmail), fork(signInWithFBGoogle), fork(signInWithFacebook)]);\n}","map":{"version":3,"names":["all","takeEvery","put","fork","call","AUTH_TOKEN","SIGNIN","SIGNOUT","SIGNUP","SIGNIN_WITH_GOOGLE","SIGNIN_WITH_FACEBOOK","showAuthMessage","authenticated","signOutSuccess","signUpSuccess","signInWithGoogleAuthenticated","signInWithFacebookAuthenticated","FirebaseService","signInWithFBEmail","payload","email","password","user","signInEmailRequest","message","localStorage","setItem","uid","err","signOut","signOutUser","signOutRequest","undefined","removeItem","signUpWithFBEmail","signUpEmailRequest","error","signInWithFBGoogle","signInGoogleRequest","signInWithFacebook","signInFacebookRequest","rootSaga"],"sources":["D:/WebBanHang/EcomWebsiteAdmin/src/redux/sagas/Auth.js"],"sourcesContent":["import { all, takeEvery, put, fork, call } from 'redux-saga/effects';\r\nimport {\r\n\tAUTH_TOKEN,\r\n\tSIGNIN,\r\n\tSIGNOUT,\r\n\tSIGNUP,\r\n\tSIGNIN_WITH_GOOGLE,\r\n\tSIGNIN_WITH_FACEBOOK\r\n} from '../constants/Auth';\r\nimport {\r\n\tshowAuthMessage,\r\n\tauthenticated,\r\n\tsignOutSuccess,\r\n\tsignUpSuccess,\r\n\tsignInWithGoogleAuthenticated,\r\n\tsignInWithFacebookAuthenticated\r\n} from \"../actions/Auth\";\r\n\r\nimport FirebaseService from 'services/FirebaseService'\r\n\r\nexport function* signInWithFBEmail() {\r\n  yield takeEvery(SIGNIN, function* ({payload}) {\r\n\t\tconst {email, password} = payload;\r\n\t\ttry {\r\n\t\t\tconst user = yield call(FirebaseService.signInEmailRequest, email, password);\r\n\t\t\tif (user.message) {\r\n\t\t\t\tyield put(showAuthMessage(user.message));\r\n\t\t\t} else {\r\n\t\t\t\tlocalStorage.setItem(AUTH_TOKEN, user.user.uid);\r\n\t\t\t\tyield put(authenticated(user.user.uid));\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tyield put(showAuthMessage(err));\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport function* signOut() {\r\n  yield takeEvery(SIGNOUT, function* () {\r\n\t\ttry {\r\n\t\t\tconst signOutUser = yield call(FirebaseService.signOutRequest);\r\n\t\t\tif (signOutUser === undefined) {\r\n\t\t\t\tlocalStorage.removeItem(AUTH_TOKEN);\r\n\t\t\t\tyield put(signOutSuccess(signOutUser));\r\n\t\t\t} else {\r\n\t\t\t\tyield put(showAuthMessage(signOutUser.message));\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tyield put(showAuthMessage(err));\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport function* signUpWithFBEmail() {\r\n  yield takeEvery(SIGNUP, function* ({payload}) {\r\n\t\tconst {email, password} = payload;\r\n\t\ttry {\r\n\t\t\tconst user = yield call(FirebaseService.signUpEmailRequest, email, password);\r\n\t\t\tif (user.message) {\r\n\t\t\t\tyield put(showAuthMessage(user.message));\r\n\t\t\t} else {\r\n\t\t\t\tlocalStorage.setItem(AUTH_TOKEN, user.user.uid);\r\n\t\t\t\tyield put(signUpSuccess(user.user.uid));\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tyield put(showAuthMessage(error));\r\n\t\t}\r\n\t}\r\n\t);\r\n}\r\n\r\nexport function* signInWithFBGoogle() {\r\n  yield takeEvery(SIGNIN_WITH_GOOGLE, function* () {\r\n\t\ttry {\r\n\t\t\tconst user = yield call(FirebaseService.signInGoogleRequest);\r\n\t\t\tif (user.message) {\r\n\t\t\t\tyield put(showAuthMessage(user.message));\r\n\t\t\t} else {\r\n\t\t\t\tlocalStorage.setItem(AUTH_TOKEN, user.user.uid);\r\n\t\t\t\tyield put(signInWithGoogleAuthenticated(user.user.uid));\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tyield put(showAuthMessage(error));\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport function* signInWithFacebook() {\r\n  yield takeEvery(SIGNIN_WITH_FACEBOOK, function* () {\r\n\t\ttry {\r\n\t\t\tconst user = yield call(FirebaseService.signInFacebookRequest);\r\n\t\t\tif (user.message) {\r\n\t\t\t\tyield put(showAuthMessage(user.message));\r\n\t\t\t} else {\r\n\t\t\t\tlocalStorage.setItem(AUTH_TOKEN, user.user.uid);\r\n\t\t\t\tyield put(signInWithFacebookAuthenticated(user.user.uid));\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tyield put(showAuthMessage(error));\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport default function* rootSaga() {\r\n  yield all([\r\n\t\tfork(signInWithFBEmail),\r\n\t\tfork(signOut),\r\n\t\tfork(signUpWithFBEmail),\r\n\t\tfork(signInWithFBGoogle),\r\n\t\tfork(signInWithFacebook)\r\n  ]);\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}