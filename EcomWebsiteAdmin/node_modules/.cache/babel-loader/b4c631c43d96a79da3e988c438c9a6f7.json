{"ast":null,"code":"var _jsxFileName = \"D:\\\\job\\\\WatchShop\\\\WatchShopAdmin\\\\src\\\\views\\\\app-views\\\\apps\\\\voucher\\\\CreateVoucherModal.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Modal, Form, Input, Spin, notification, DatePicker, Switch, message } from \"antd\"; // Import các thành phần cần thiết\nimport moment from \"moment\"; // Import moment để xử lý ngày\nimport { createVoucher } from \"services/voucherService\"; // Import hàm gọi API\n\nconst CreateVoucherModal = ({\n  visible,\n  onCancel,\n  refreshVouchers\n}) => {\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false); // Thêm state để quản lý loading\n\n  const handleFinish = async values => {\n    setLoading(true); // Bắt đầu loading\n\n    // Định dạng expirationDate về dạng ISO string\n    const expirationDate = moment(values.expirationDate).toISOString();\n\n    // Tạo đối tượng voucher\n    const voucherData = {\n      code: values.code,\n      discount: values.discount,\n      expirationDate: expirationDate,\n      isUsed: values.isUsed\n    };\n\n    // Gọi API tạo voucher\n    try {\n      await createVoucher(voucherData);\n      message.success(\"Thêm voucher thành công\");\n      refreshVouchers(); // Cập nhật danh sách voucher\n      form.resetFields(); // Reset các trường trong form\n      onCancel(); // Đóng modal\n    } catch (error) {\n      notification.error({\n        message: \"Thất bại\",\n        description: \"Thêm voucher thất bại\",\n        placement: \"topRight\" // Vị trí thông báo\n      });\n      console.error(\"Error creating voucher:\", error);\n    } finally {\n      setLoading(false); // Kết thúc loading\n    }\n  };\n  return /*#__PURE__*/React.createElement(Modal, {\n    visible: visible,\n    title: \"Th\\xEAm M\\u1EDBi Voucher\",\n    okText: \"Th\\xEAm\",\n    cancelText: \"H\\u1EE7y\",\n    onCancel: onCancel,\n    onOk: () => form.submit(),\n    getPopupContainer: trigger => trigger.parentNode // Đặt getPopupContainer\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    form: form,\n    layout: \"vertical\",\n    onFinish: handleFinish,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"code\",\n    label: \"M\\xE3 Voucher\",\n    rules: [{\n      required: true,\n      message: \"Vui lòng nhập mã voucher!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"discount\",\n    label: \"Gi\\u1EA3m Gi\\xE1 (%)\",\n    rules: [{\n      required: true,\n      message: \"Vui lòng nhập giảm giá!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"number\",\n    min: 0,\n    max: 100,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"expirationDate\",\n    label: \"Ng\\xE0y H\\u1EBFt H\\u1EA1n\",\n    rules: [{\n      required: true,\n      message: \"Vui lòng chọn ngày hết hạn!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    style: {\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"\\u0110\\xE3 S\\u1EED D\\u1EE5ng\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"isUsed\",\n    valuePropName: \"checked\",\n    noStyle: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  })))), loading && /*#__PURE__*/React.createElement(Spin, {\n    style: {\n      display: \"block\",\n      margin: \"20px auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 19\n    }\n  }), \" \");\n};\nexport default CreateVoucherModal;","map":{"version":3,"names":["React","useState","useEffect","Modal","Form","Input","Spin","notification","DatePicker","Switch","message","moment","createVoucher","CreateVoucherModal","visible","onCancel","refreshVouchers","form","useForm","loading","setLoading","handleFinish","values","expirationDate","toISOString","voucherData","code","discount","isUsed","success","resetFields","error","description","placement","console","createElement","title","okText","cancelText","onOk","submit","getPopupContainer","trigger","parentNode","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","layout","onFinish","Item","name","label","rules","required","type","min","max","style","width","valuePropName","noStyle","display","margin"],"sources":["D:/job/WatchShop/WatchShopAdmin/src/views/app-views/apps/voucher/CreateVoucherModal.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Modal,\r\n  Form,\r\n  Input,\r\n  Spin,\r\n  notification,\r\n  DatePicker,\r\n  Switch,\r\n  message,\r\n} from \"antd\"; // Import các thành phần cần thiết\r\nimport moment from \"moment\"; // Import moment để xử lý ngày\r\nimport { createVoucher } from \"services/voucherService\"; // Import hàm gọi API\r\n\r\nconst CreateVoucherModal = ({ visible, onCancel, refreshVouchers }) => {\r\n  const [form] = Form.useForm();\r\n  const [loading, setLoading] = useState(false); // Thêm state để quản lý loading\r\n\r\n  const handleFinish = async (values) => {\r\n    setLoading(true); // Bắt đầu loading\r\n\r\n    // Định dạng expirationDate về dạng ISO string\r\n    const expirationDate = moment(values.expirationDate).toISOString();\r\n\r\n    // Tạo đối tượng voucher\r\n    const voucherData = {\r\n      code: values.code,\r\n      discount: values.discount,\r\n      expirationDate: expirationDate,\r\n      isUsed: values.isUsed,\r\n    };\r\n\r\n    // Gọi API tạo voucher\r\n    try {\r\n      await createVoucher(voucherData);\r\n      message.success(\"Thêm voucher thành công\");\r\n      refreshVouchers(); // Cập nhật danh sách voucher\r\n      form.resetFields(); // Reset các trường trong form\r\n      onCancel(); // Đóng modal\r\n    } catch (error) {\r\n      notification.error({\r\n        message: \"Thất bại\",\r\n        description: \"Thêm voucher thất bại\",\r\n        placement: \"topRight\", // Vị trí thông báo\r\n      });\r\n      console.error(\"Error creating voucher:\", error);\r\n    } finally {\r\n      setLoading(false); // Kết thúc loading\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      visible={visible}\r\n      title=\"Thêm Mới Voucher\"\r\n      okText=\"Thêm\"\r\n      cancelText=\"Hủy\"\r\n      onCancel={onCancel}\r\n      onOk={() => form.submit()}\r\n      getPopupContainer={(trigger) => trigger.parentNode} // Đặt getPopupContainer\r\n    >\r\n      <Form form={form} layout=\"vertical\" onFinish={handleFinish}>\r\n        <Form.Item\r\n          name=\"code\"\r\n          label=\"Mã Voucher\"\r\n          rules={[{ required: true, message: \"Vui lòng nhập mã voucher!\" }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"discount\"\r\n          label=\"Giảm Giá (%)\"\r\n          rules={[{ required: true, message: \"Vui lòng nhập giảm giá!\" }]}\r\n        >\r\n          <Input type=\"number\" min={0} max={100} />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"expirationDate\"\r\n          label=\"Ngày Hết Hạn\"\r\n          rules={[{ required: true, message: \"Vui lòng chọn ngày hết hạn!\" }]}\r\n        >\r\n          <DatePicker style={{ width: \"100%\" }} />\r\n        </Form.Item>\r\n        <Form.Item label=\"Đã Sử Dụng\">\r\n          <Form.Item name=\"isUsed\" valuePropName=\"checked\" noStyle>\r\n            <Switch />\r\n          </Form.Item>\r\n        </Form.Item>\r\n      </Form>\r\n      {loading && <Spin style={{ display: \"block\", margin: \"20px auto\" }} />}{\" \"}\r\n      {/* Thêm spinner */}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default CreateVoucherModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}